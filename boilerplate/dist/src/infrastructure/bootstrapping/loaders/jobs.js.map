{"version":3,"file":"jobs.js","sourceRoot":"","sources":["../../../../../src/infrastructure/bootstrapping/loaders/jobs.ts"],"names":[],"mappings":";;;;;;;;;;;AAEA,yCAAsC;AACtC,kDAA2D;AAE3D,SAAe,gBAAgB,CAAC,MAAc;;QAC1C,MAAM,QAAQ,GAAG,IAAI,kBAAO,EAAE,CAAC;QAC/B,MAAM,OAAO,GAAG,sBAAW,CAAC,sBAAW,CAAC,iBAAiB,CAAC,CAAC;QAC3D,MAAM,CAAC,MAAM,CACT,OAAO,EACP,EAAE,QAAQ,EAAE,MAAM,EAAE,WAAW,EAAE,eAAM,CAAC,MAAM,CAAC,WAAW,EAAE,EAC5D,QAAQ,CAAC,gBAAgB,CAC5B,CAAC;QACF,MAAM,MAAM,CAAC,KAAK,EAAE,CAAC;IACzB,CAAC;CAAA;AAEY,QAAA,IAAI,GAAG,CAAC,gBAAgB,CAAC,CAAC","sourcesContent":["import Agenda from \"agenda\";\n\nimport { config } from \"../../config\";\nimport { MailJob, MailJobType } from \"../../jobs/mail_job\";\n\nasync function sendWelcomeEmail(agenda: Agenda): Promise<void> {\n    const emailJob = new MailJob();\n    const jobType = MailJobType[MailJobType.SEND_WELCOME_MAIL];\n    agenda.define(\n        jobType,\n        { priority: \"high\", concurrency: config.agenda.concurrency },\n        emailJob.sendWelcomeEmail\n    );\n    await agenda.start();\n}\n\nexport const Jobs = [sendWelcomeEmail];\n"]}