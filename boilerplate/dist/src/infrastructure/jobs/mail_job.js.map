{"version":3,"file":"mail_job.js","sourceRoot":"","sources":["../../../../src/infrastructure/jobs/mail_job.ts"],"names":[],"mappings":";;;;;;;;;;;AAEA,uCAA6C;AAC7C,+DAA2D;AAE3D,IAAY,WAEX;AAFD,WAAY,WAAW;IACnB,uEAAiB,CAAA;AACrB,CAAC,EAFW,WAAW,GAAX,mBAAW,KAAX,mBAAW,QAEtB;AAED,MAAa,OAAO;IACH,gBAAgB,CAAC,GAAQ,EAAE,IAAc;;YAClD,MAAM,MAAM,GAAG,kBAAY,CAAC,GAAG,CAAiB,8BAAa,CAAC,CAAC;YAC/D,yEAAyE;YACzE,IAAI;gBACA,MAAM,EAAE,KAAK,EAAE,SAAS,EAAE,GAAS,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC;gBAElD,aAAa;gBACb,sCAAsC;gBACtC,aAAa;gBACb,0BAA0B;gBAC1B,8CAA8C;gBAC9C,KAAK;gBAEL,MAAM,CAAC,IAAI,CAAC,qBAAqB,KAAK,IAAI,SAAS,EAAE,CAAC,CAAC;gBAEvD,IAAI,EAAE,CAAC;aACV;YAAC,OAAO,CAAC,EAAE;gBACR,MAAM,CAAC,KAAK,CAAC,oCAAoC,EAAE,CAAC,CAAC,CAAC;gBACtD,IAAI,CAAC,CAAC,CAAC,CAAC;aACX;QACL,CAAC;KAAA;CACJ;AAtBD,0BAsBC","sourcesContent":["import { ILoggerService } from \"../../core/application/logger_service\";\nimport { User } from \"../../core/domain/models/user\";\nimport { iocContainer } from \"../config/ioc\";\nimport { LoggerService } from \"../services/logger_service\";\n\nexport enum MailJobType {\n    SEND_WELCOME_MAIL\n}\n\nexport class MailJob {\n    public async sendWelcomeEmail(job: any, done: Function): Promise<void> {\n        const logger = iocContainer.get<ILoggerService>(LoggerService);\n        // const mailService = iocContainer.get<IMailService>(TYPES.MailService);\n        try {\n            const { email, firstName }: User = job.attrs.data;\n\n            // Send email\n            // await mailService.sendWelcomeEmail(\n            //     email,\n            //     \"Welcome to MyApp\",\n            //     `Hello ${firstName}.\\nWelcome to MyApp`\n            // );\n\n            logger.info(`✔️  Email sent to ${email}/${firstName}`);\n\n            done();\n        } catch (e) {\n            logger.error(\"❌  Error with Email Sequence Job: \", e);\n            done(e);\n        }\n    }\n}\n"]}