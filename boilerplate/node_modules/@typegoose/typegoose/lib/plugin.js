"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const data_1 = require("./internal/data");
/**
 * Add a Middleware-Plugin
 * @param mongoosePlugin The Plugin to plug-in
 * @param options Options for the Plugin, if any
 */
function plugin(mongoosePlugin, options) {
    return (target) => {
        const name = target.name;
        options = typeof options !== 'object' ? {} : options; // ensure it is an object, even if empty
        /* istanbul ignore else */
        if (!data_1.plugins.get(name)) {
            data_1.plugins.set(name, []);
        }
        data_1.plugins.get(name).push({ mongoosePlugin, options });
    };
}
exports.plugin = plugin;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGx1Z2luLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL3BsdWdpbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLDBDQUEwQztBQUcxQzs7OztHQUlHO0FBQ0gsU0FBZ0IsTUFBTSxDQUFDLGNBQW9CLEVBQUUsT0FBYTtJQUN4RCxPQUFPLENBQUMsTUFBVyxFQUFFLEVBQUU7UUFDckIsTUFBTSxJQUFJLEdBQVcsTUFBTSxDQUFDLElBQUksQ0FBQztRQUVqQyxPQUFPLEdBQUcsT0FBTyxPQUFPLEtBQUssUUFBUSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLHdDQUF3QztRQUU5RiwwQkFBMEI7UUFDMUIsSUFBSSxDQUFDLGNBQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUU7WUFDdEIsY0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLENBQUM7U0FDdkI7UUFDRCxjQUFPLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLGNBQWMsRUFBRSxPQUFPLEVBQUUsQ0FBQyxDQUFDO0lBQ3RELENBQUMsQ0FBQztBQUNKLENBQUM7QUFaRCx3QkFZQyJ9